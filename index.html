<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School ‚Ññ1 | –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4F46E5; /* Indigo 600 */
            --primary-dark: #4338ca;
            --secondary: #64748b;
            --bg: #F3F4F6;
            --white: #ffffff;
            --danger: #ef4444;
            --success: #10b981;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg); color: #1f2937; line-height: 1.5; }
        
        /* --- UTILS --- */
        .hidden { display: none !important; }
        .btn { display: inline-block; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: 0.2s; border: none; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); }
        .btn-danger { background: white; border: 1px solid var(--danger); color: var(--danger); }
        .btn-danger:hover { background: var(--danger); color: white; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }

        /* --- AUTH SCREEN --- */
        #auth-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #4F46E5 0%, #818cf8 100%);
            display: flex; justify-content: center; align-items: center; z-index: 1000;
        }
        .auth-card { background: white; padding: 2.5rem; border-radius: 1rem; width: 100%; max-width: 420px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); }
        .auth-card h1 { text-align: center; color: var(--primary); margin-bottom: 0.5rem; }
        .auth-card p { text-align: center; color: var(--secondary); margin-bottom: 2rem; }
        .input-group { margin-bottom: 1rem; }
        .input-group label { display: block; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem; }
        .input-group input { width: 100%; padding: 0.75rem; border: 1px solid #e2e8f0; border-radius: 0.5rem; outline: none; transition: 0.2s; }
        .input-group input:focus { border-color: var(--primary); ring: 2px solid var(--primary); }
        .auth-switch { text-align: center; margin-top: 1rem; font-size: 0.875rem; color: var(--primary); cursor: pointer; text-decoration: underline; }

        /* --- DASHBOARD --- */
        header { background: white; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1); position: sticky; top: 0; z-index: 50; }
        .nav-content { display: flex; justify-content: space-between; align-items: center; height: 70px; }
        .logo { font-size: 1.5rem; font-weight: 800; color: var(--primary); letter-spacing: -0.025em; }
        .nav-links { display: flex; gap: 20px; align-items: center; }
        .nav-links a { text-decoration: none; color: var(--secondary); font-weight: 500; cursor: pointer; }
        .nav-links a:hover { color: var(--primary); }
        .user-menu { display: flex; align-items: center; gap: 10px; }
        .role-badge { padding: 4px 12px; border-radius: 99px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; }
        .role-admin { background: #fee2e2; color: #991b1b; }
        .role-teacher { background: #fef3c7; color: #92400e; }
        .role-student { background: #dcfce7; color: #166534; }

        /* --- HERO & SECTIONS --- */
        .hero { background: white; padding: 3rem 0; text-align: center; margin-bottom: 2rem; border-bottom: 1px solid #e5e7eb; }
        .hero h2 { font-size: 2.25rem; font-weight: 800; color: #111827; margin-bottom: 1rem; }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 2rem; }
        .feature-item { text-align: left; padding: 1.5rem; background: #f8fafc; border-radius: 0.75rem; }
        .feature-icon { font-size: 1.5rem; margin-bottom: 1rem; }

        /* --- SUBJECTS GRID --- */
        .subjects-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 2rem; padding-bottom: 3rem; }
        .subject-card { background: white; border-radius: 1rem; overflow: hidden; box-shadow: var(--shadow); transition: 0.3s; cursor: pointer; border: 1px solid transparent; }
        .subject-card:hover { transform: translateY(-5px); border-color: var(--primary); }
        .card-img { height: 160px; background-color: #ddd; background-size: cover; background-position: center; position: relative; }
        .card-img::after { content: ''; position: absolute; top:0; left:0; width:100%; height:100%; background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.6)); }
        .card-content { padding: 1.5rem; }
        .card-content h3 { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; }
        .card-meta { display: flex; justify-content: space-between; color: var(--secondary); font-size: 0.875rem; }

        /* --- QUIZ INTERFACE --- */
        .quiz-container { max-width: 800px; margin: 2rem auto; background: white; padding: 2rem; border-radius: 1rem; box-shadow: var(--shadow); }
        .quiz-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid #e5e7eb; }
        .progress-bar { height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden; margin-top: 10px; width: 100%; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: 0.3s ease; }
        .question-text { font-size: 1.25rem; font-weight: 600; margin-bottom: 1.5rem; }
        .options-list { display: flex; flex-direction: column; gap: 1rem; }
        .option-btn { text-align: left; padding: 1rem; border: 2px solid #e5e7eb; border-radius: 0.75rem; background: white; cursor: pointer; font-size: 1rem; transition: 0.2s; }
        .option-btn:hover { border-color: var(--primary); background: #eff6ff; }
        .option-btn.selected { border-color: var(--primary); background: var(--primary); color: white; }

        /* --- RESULTS & REVIEW --- */
        .result-score { font-size: 4rem; font-weight: 800; color: var(--primary); text-align: center; margin: 1rem 0; }
        .review-item { background: white; border: 1px solid #e5e7eb; padding: 1.5rem; border-radius: 0.75rem; margin-bottom: 1rem; }
        .review-item.correct { border-left: 5px solid var(--success); }
        .review-item.wrong { border-left: 5px solid var(--danger); }
        .explanation { margin-top: 1rem; padding-top: 1rem; border-top: 1px dashed #e5e7eb; font-size: 0.9rem; color: #4b5563; }

        /* --- TABLE --- */
        .table-container { overflow-x: auto; background: white; border-radius: 1rem; box-shadow: var(--shadow); }
        table { width: 100%; border-collapse: collapse; text-align: left; }
        th, td { padding: 1rem 1.5rem; border-bottom: 1px solid #e5e7eb; }
        th { background: #f8fafc; font-weight: 600; text-transform: uppercase; font-size: 0.75rem; color: var(--secondary); }

        /* --- FOOTER --- */
        footer { background: #1e293b; color: white; padding: 3rem 0; margin-top: auto; }
        .footer-content { display: flex; flex-wrap: wrap; gap: 2rem; justify-content: space-between; }
        .footer-col h4 { margin-bottom: 1rem; color: #94a3b8; text-transform: uppercase; font-size: 0.875rem; }
        .contact-link { display: flex; align-items: center; gap: 0.5rem; color: white; text-decoration: none; margin-bottom: 0.5rem; opacity: 0.8; }
        .contact-link:hover { opacity: 1; }
    </style>
</head>
<body>

    <div id="auth-screen">
        <div class="auth-card">
            <h1>School ‚Ññ1</h1>
            <p>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º</p>
            
            <form id="login-form">
                <div class="input-group">
                    <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                    <input type="text" id="login-username" placeholder="–í–∞—à –ª–æ–≥–∏–Ω" required>
                </div>
                <div class="input-group">
                    <label>–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="login-password" placeholder="–í–∞—à –ø–∞—Ä–æ–ª—å" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%">–í–æ–π—Ç–∏</button>
                <div class="auth-switch" onclick="toggleAuthMode()">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</div>
            </form>

            <form id="register-form" class="hidden">
                <div class="input-group">
                    <label>–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏–º—è (–§–ò–û)</label>
                    <input type="text" id="reg-username" required>
                </div>
                <div class="input-group">
                    <label>–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                    <input type="password" id="reg-password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
                <div class="auth-switch" onclick="toggleAuthMode()">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏</div>
            </form>
        </div>
    </div>

    <div id="app" class="hidden">
        <header>
            <div class="container nav-content">
                <div class="logo">SCHOOL <span style="color:#111827">‚Ññ1</span></div>
                <nav class="nav-links">
                    <a onclick="showPage('dashboard')">–û–±—É—á–µ–Ω–∏–µ</a>
                    <a onclick="showPage('about')">–û –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ</a>
                    <a id="admin-link" class="hidden" onclick="showPage('admin')">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</a>
                </nav>
                <div class="user-menu">
                    <div id="user-badge" class="role-badge role-student">–£—á–µ–Ω–∏–∫</div>
                    <span id="user-name-display" style="font-weight: 600;">User</span>
                    <button onclick="logout()" style="background:none; border:none; color:var(--danger); cursor:pointer; font-size:0.9rem;">–í—ã–π—Ç–∏</button>
                </div>
            </div>
        </header>

        <div class="container" style="min-height: 80vh; padding-top: 2rem;">
            
            <div id="page-dashboard" class="page">
                <div class="hero">
                    <h2>–ì–æ—Ç–æ–≤—å—Å—è –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ</h2>
                    <p style="color:var(--secondary); max-width: 600px; margin: 0 auto;">
                        School ‚Ññ1 ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏ —É—Ä–æ–≤–Ω—è –ï–ì–≠/–û–ì–≠ –∏ –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ —Ä–∞–∑–±–æ—Ä–∞–º–∏ –æ—à–∏–±–æ–∫.
                    </p>
                    <div class="features-grid">
                        <div class="feature-item">‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ï–ù–¢/–û–ì–≠/–ï–ì–≠</div>
                        <div class="feature-item">‚úÖ –®–∫–æ–ª—å–Ω—ã–µ –æ–ª–∏–º–ø–∏–∞–¥—ã –æ–Ω–ª–∞–π–Ω</div>
                        <div class="feature-item">‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è —É—á–∏—Ç–µ–ª–µ–π</div>
                        <div class="feature-item">‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞–∑–±–æ—Ä —Ä–µ—à–µ–Ω–∏–π</div>
                    </div>
                </div>

                <h3 style="margin-bottom: 1.5rem; font-size: 1.5rem;">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç</h3>
                <div class="subjects-grid" id="subjects-container">
                    </div>
            </div>

            <div id="page-quiz" class="page hidden">
                <div class="quiz-container">
                    <div class="quiz-header">
                        <div>
                            <h3 id="quiz-subject-title" style="color:var(--secondary)">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</h3>
                            <div class="progress-bar" style="width: 200px;"><div id="quiz-progress" class="progress-fill"></div></div>
                        </div>
                        <button onclick="cancelTest()" class="btn btn-danger" style="font-size: 0.9rem;">‚úï –û—Ç–º–µ–Ω–∏—Ç—å —Ç–µ—Å—Ç</button>
                    </div>

                    <div id="question-box">
                        <div class="question-text" id="q-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        <div class="options-list" id="q-options"></div>
                        <button id="next-btn" class="btn btn-primary" style="margin-top: 1.5rem;">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
                    </div>
                </div>
            </div>

            <div id="page-result" class="page hidden">
                <div class="quiz-container">
                    <h2 style="text-align: center;">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
                    <div class="result-score" id="final-score">0/30</div>
                    <p style="text-align: center; color: var(--secondary); margin-bottom: 2rem;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —É—á–∏—Ç–µ–ª—é.</p>
                    
                    <h3>–ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞–∑–±–æ—Ä –æ—à–∏–±–æ–∫:</h3>
                    <div id="review-container" style="margin-top: 1.5rem;"></div>
                    
                    <div style="text-align: center; margin-top: 2rem;">
                        <button onclick="showPage('dashboard')" class="btn btn-primary">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–¥–º–µ—Ç–∞–º</button>
                    </div>
                </div>
            </div>

            <div id="page-admin" class="page hidden">
                <div class="hero" style="padding: 1rem 0; text-align: left; border: none;">
                    <h2>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
                    <p id="admin-subtitle">–ü—Ä–æ—Å–º–æ—Ç—Ä —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏ —É—á–µ–Ω–∏–∫–æ–≤</p>
                </div>
                <div class="table-container">
                    <table id="admin-table">
                        <thead>
                            <tr>
                                <th>–î–∞—Ç–∞</th>
                                <th>–£—á–µ–Ω–∏–∫</th>
                                <th>–ü—Ä–µ–¥–º–µ—Ç</th>
                                <th>–ë–∞–ª–ª—ã</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <div id="page-about" class="page hidden">
                <div class="quiz-container" style="max-width: 1000px;">
                    <h2>–û –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ School ‚Ññ1</h2>
                    <p style="margin-top: 1rem;">
                        –≠—Ç–∞ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–Ω–∞–Ω–∏–π. 
                        –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑—É –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º.
                    </p>
                    <div style="margin-top: 2rem; background: #f8fafc; padding: 2rem; border-radius: 1rem;">
                        <h3>–ü–æ—á–µ–º—É —ç—Ç–æ –Ω—É–∂–Ω–æ?</h3>
                        <ul style="margin-top: 1rem; padding-left: 1.5rem; line-height: 1.8;">
                            <li><strong>–î–ª—è —É—á–µ–Ω–∏–∫–æ–≤:</strong> –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö –±–µ–∑ —Å—Ç—Ä–µ—Å—Å–∞, —Å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é.</li>
                            <li><strong>–î–ª—è —É—á–∏—Ç–µ–ª–µ–π:</strong> –ò–∑–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ—Ç—Ä–∞–¥–µ–π –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.</li>
                            <li><strong>–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏:</strong> –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞ 0.1 —Å–µ–∫—É–Ω–¥—ã.</li>
                        </ul>
                    </div>
                    <p style="margin-top: 2rem; font-style: italic;">–ê–≤—Ç–æ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã: –¢–µ–Ω—å</p>
                </div>
            </div>

        </div>

        <footer>
            <div class="container footer-content">
                <div class="footer-col">
                    <h4>School ‚Ññ1</h4>
                    <p style="font-size: 0.9rem; opacity: 0.7; max-width: 300px;">
                        –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –≤—ã–ø—É—Å–∫–Ω—ã–º —ç–∫–∑–∞–º–µ–Ω–∞–º.
                    </p>
                </div>
                <div class="footer-col">
                    <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                    <a href="https://t.me/ataniyazov_m" class="contact-link">
                        <span>‚úàÔ∏è</span> Telegram: @ataniyazov_m
                    </a>
                    <a href="tel:+998936940109" class="contact-link">
                        <span>üìû</span> +998 93 694 01 09
                    </a>
                    <div style="color:white; opacity:0.8; font-size:0.9rem; margin-top:10px;">–ê–¥–º–∏–Ω: –ê—Ç–∞–Ω–∏—è–∑–æ–≤ –ú—É—Ä–∞—Ç</div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 2rem; opacity: 0.5; font-size: 0.8rem;">
                &copy; 2026 School ‚Ññ1. All rights reserved.
            </div>
        </footer>
    </div>

<script>
    // --- 1. –ë–ê–ó–ê –î–ê–ù–ù–´–• –í–û–ü–†–û–°–û–í (–°–õ–û–ñ–ù–´–ï) ---
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ —Ç—É—Ç –±—É–¥–µ—Ç 1000 –≤–æ–ø—Ä–æ—Å–æ–≤. –ó–¥–µ—Å—å –ø—Ä–∏–º–µ—Ä—ã —Å—Ç—Ä—É–∫—Ç—É—Ä.
    
    const SUBJECTS_DATA = {
        '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞': {
            img: 'https://images.unsplash.com/photo-1635070041078-e363dbe005cb?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80',
            desc: '–ü—Ä–æ—Ñ–∏–ª—å –ï–ì–≠, —Ç—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—è, –ª–æ–≥–∞—Ä–∏—Ñ–º—ã',
            questions: [
                { q: '–ù–∞–π–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è: log‚ÇÇ16 + log‚ÇÉ27', options: ['7', '6', '8', '5'], correct: 0, sol: 'log‚ÇÇ16 = 4 (—Ç.–∫. 2‚Å¥=16), log‚ÇÉ27 = 3 (—Ç.–∫. 3¬≥=27). –°—É–º–º–∞: 4+3=7.' },
                { q: '–†–µ—à–∏—Ç–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ: ‚àö(2x + 5) = 7', options: ['20', '21', '22', '24'], correct: 2, sol: '–í–æ–∑–≤–æ–¥–∏–º –≤ –∫–≤–∞–¥—Ä–∞—Ç: 2x + 5 = 49 => 2x = 44 => x = 22.' },
                { q: '–ß–µ–º—É —Ä–∞–≤–µ–Ω sin(30¬∞) + cos(60¬∞)?', options: ['1', '‚àö3', '0.5', '‚àö2'], correct: 0, sol: 'sin(30¬∞) = 0.5, cos(60¬∞) = 0.5. –°—É–º–º–∞ = 1.' },
                { q: '–ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–∏ y = x¬≥ - 2x', options: ['3x¬≤ - 2', 'x¬≤ - 2', '3x - 2', '3x¬≤'], correct: 0, sol: '(x¬≥)\' = 3x¬≤, (2x)\' = 2. –û—Ç–≤–µ—Ç: 3x¬≤ - 2.' }
            ]
        },
        '–§–∏–∑–∏–∫–∞': {
            img: 'https://images.unsplash.com/photo-1636466497217-26a8cbeaf0aa?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80',
            desc: '–ú–µ—Ö–∞–Ω–∏–∫–∞, –ú–ö–¢, —ç–ª–µ–∫—Ç—Ä–æ–¥–∏–Ω–∞–º–∏–∫–∞',
            questions: [
                { q: '–¢–µ–ª–æ –¥–≤–∏–∂–µ—Ç—Å—è –ø–æ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ —Å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é. –ö–∞–∫ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–æ —É—Å–∫–æ—Ä–µ–Ω–∏–µ?', options: ['–ü–æ –∫–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π', '–ö —Ü–µ–Ω—Ç—Ä—É', '–û—Ç —Ü–µ–Ω—Ç—Ä–∞', '–†–∞–≤–Ω–æ –Ω—É–ª—é'], correct: 1, sol: '–ü—Ä–∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏ –ø–æ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ü–µ–Ω—Ç—Ä–æ—Å—Ç—Ä–µ–º–∏—Ç–µ–ª—å–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –∫ —Ü–µ–Ω—Ç—Ä—É.' },
                { q: '–ö–ü–î –∏–¥–µ–∞–ª—å–Ω–æ–π —Ç–µ–ø–ª–æ–≤–æ–π –º–∞—à–∏–Ω—ã (—Ü–∏–∫–ª –ö–∞—Ä–Ω–æ), –µ—Å–ª–∏ T–Ω = 127¬∞C, T—Ö = 27¬∞C', options: ['25%', '50%', '75%', '100%'], correct: 0, sol: '–ü–µ—Ä–µ–≤–æ–¥–∏–º –≤ –ö–µ–ª—å–≤–∏–Ω—ã: T–Ω=400–ö, T—Ö=300–ö. –ö–ü–î = (400-300)/400 = 1/4 = 25%.' },
                { q: '–°–∏–ª–∞ —Ç–æ–∫–∞ –≤ —É—á–∞—Å—Ç–∫–µ —Ü–µ–ø–∏ 2–ê, —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ 10 –û–º. –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ?', options: ['5 –í', '12 –í', '20 –í', '0.2 –í'], correct: 2, sol: '–ó–∞–∫–æ–Ω –û–º–∞: U = I * R = 2 * 10 = 20 –í.' }
            ]
        },
        '–ò—Å—Ç–æ—Ä–∏—è': {
            img: 'https://images.unsplash.com/photo-1461360370896-922624d12aa1?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80',
            desc: '–í—Å–µ–º–∏—Ä–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∏ –∏—Å—Ç–æ—Ä–∏—è –æ—Ç–µ—á–µ—Å—Ç–≤–∞',
            questions: [
                { q: '–í –∫–∞–∫–æ–º –≥–æ–¥—É –ø—Ä–æ–∏–∑–æ—à–ª–∞ –ö—É–ª–∏–∫–æ–≤—Å–∫–∞—è –±–∏—Ç–≤–∞?', options: ['1242', '1380', '1480', '1382'], correct: 1, sol: '8 —Å–µ–Ω—Ç—è–±—Ä—è 1380 –≥–æ–¥–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–µ —Ä—É—Å—Å–∫–æ–µ –≤–æ–π—Å–∫–æ –≤–æ –≥–ª–∞–≤–µ —Å –î–º–∏—Ç—Ä–∏–µ–º –î–æ–Ω—Å–∫–∏–º —Ä–∞–∑–±–∏–ª–æ –≤–æ–π—Å–∫–∞ –ú–∞–º–∞—è.' },
                { q: '–ö—Ç–æ —Å—Ç–∞–ª –ø–µ—Ä–≤—ã–º –∏–º–ø–µ—Ä–∞—Ç–æ—Ä–æ–º –†–∏–º–∞?', options: ['–Æ–ª–∏–π –¶–µ–∑–∞—Ä—å', '–û–∫—Ç–∞–≤–∏–∞–Ω –ê–≤–≥—É—Å—Ç', '–ù–µ—Ä–æ–Ω', '–¢—Ä–∞—è–Ω'], correct: 1, sol: '–û–∫—Ç–∞–≤–∏–∞–Ω –ê–≤–≥—É—Å—Ç –≤ 27 –≥. –¥–æ –Ω.—ç. —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Å–Ω–æ–≤–∞–ª –†–∏–º—Å–∫—É—é –∏–º–ø–µ—Ä–∏—é.' },
                { q: '–û—Ç–º–µ–Ω–∞ –∫—Ä–µ–ø–æ—Å—Ç–Ω–æ–≥–æ –ø—Ä–∞–≤–∞ –≤ –†–æ—Å—Å–∏–∏?', options: ['1855', '1861', '1905', '1825'], correct: 1, sol: '–ú–∞–Ω–∏—Ñ–µ—Å—Ç –±—ã–ª –ø–æ–¥–ø–∏—Å–∞–Ω –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–º II –≤ 1861 –≥–æ–¥—É.' }
            ]
        },
        '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π': {
            img: 'https://images.unsplash.com/photo-1543002588-bfa74002ed7e?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80',
            desc: 'Grammar, Reading, Vocabulary',
            questions: [
                { q: 'Choose correct: If I ___ you, I would go there.', options: ['was', 'am', 'were', 'have been'], correct: 2, sol: 'Second Conditional —Ç—Ä–µ–±—É–µ—Ç "were" –¥–ª—è –≤—Å–µ—Ö –ª–∏—Ü (If I were you).' },
                { q: 'She ___ living here for 5 years.', options: ['has been', 'is', 'was', 'have'], correct: 0, sol: 'Present Perfect Continuous (–¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞—á–∞–ª–æ—Å—å –≤ –ø—Ä–æ—à–ª–æ–º –∏ –¥–ª–∏—Ç—Å—è –¥–æ —Å–∏—Ö –ø–æ—Ä): has been.' }
            ]
        },
        '–†—É—Å—Å–∫–∏–π —è–∑—ã–∫': {
            img: 'https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80',
            desc: '–û—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—è, –ø—É–Ω–∫—Ç—É–∞—Ü–∏—è, —É–¥–∞—Ä–µ–Ω–∏—è',
            questions: [
                { q: '–£–∫–∞–∂–∏—Ç–µ —Å–ª–æ–≤–æ —Å –æ—à–∏–±–∫–æ–π: "–ü–æ–ª-–ª–∏–º–æ–Ω–∞", "–ü–æ–ª-–ú–æ—Å–∫–≤—ã", "–ü–æ–ª—á–∞–π–Ω–æ–π –ª–æ–∂–∫–∏"', options: ['–ü–æ–ª-–ª–∏–º–æ–Ω–∞', '–ü–æ–ª-–ú–æ—Å–∫–≤—ã', '–ü–æ–ª—á–∞–π–Ω–æ–π –ª–æ–∂–∫–∏'], correct: 2, sol: '"–ü–æ–ª" –ø–∏—à–µ—Ç—Å—è —Å–ª–∏—Ç–Ω–æ, –µ—Å–ª–∏ –≤—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–≥–ª–∞—Å–Ω—É—é (–∫—Ä–æ–º–µ –õ). –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ü–æ–ª—á–∞–π–Ω–æ–π –ª–æ–∂–∫–∏.' },
                { q: '–í –∫–∞–∫–æ–º —Å–ª–æ–≤–µ —É–¥–∞—Ä–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–ª–æ–≥?', options: ['–¢–æ—Ä—Ç—ã', '–ë–∞–ª—É–µ—à—å', '–ö–∞—Ç–∞–ª–æ–≥', '–ö—Ä–∞—Å–∏–≤–µ–µ'], correct: 2, sol: '–¢–û—Ä—Ç—ã, –±–ê–ª—É–µ—à—å, –∫—Ä–∞—Å–ò–≤–µ–µ, –Ω–æ –∫–∞—Ç–∞–ª–û–≥.' }
            ]
        },
        '–ì–µ–æ–º–µ—Ç—Ä–∏—è': {
            img: 'https://images.unsplash.com/photo-1509228468518-180dd4864904?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80',
            desc: '–ü–ª–∞–Ω–∏–º–µ—Ç—Ä–∏—è –∏ —Å—Ç–µ—Ä–µ–æ–º–µ—Ç—Ä–∏—è',
            questions: [
                { q: '–ü–ª–æ—â–∞–¥—å –∫—Ä—É–≥–∞ —Å —Ä–∞–¥–∏—É—Å–æ–º 5?', options: ['10œÄ', '25œÄ', '5œÄ', '100œÄ'], correct: 1, sol: 'S = œÄR¬≤ = œÄ * 5¬≤ = 25œÄ.' },
                { q: '–°—É–º–º–∞ —É–≥–ª–æ–≤ –≤—ã–ø—É–∫–ª–æ–≥–æ —á–µ—Ç—ã—Ä–µ—Ö—É–≥–æ–ª—å–Ω–∏–∫–∞?', options: ['180¬∞', '360¬∞', '540¬∞', '720¬∞'], correct: 1, sol: '–°—É–º–º–∞ —É–≥–ª–æ–≤ n-—É–≥–æ–ª—å–Ω–∏–∫–∞: 180(n-2). –î–ª—è n=4: 180*2 = 360.' }
            ]
        }
    };

    // --- 2. –õ–û–ì–ò–ö–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ---

    let CURRENT_USER = null;
    let QUIZ_STATE = { subject: null, questions: [], answers: [], index: 0 };
    
    // –ò–º–∏—Ç–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ LocalStorage
    const DB = {
        users: JSON.parse(localStorage.getItem('users_v2')) || [],
        results: JSON.parse(localStorage.getItem('results_v2')) || []
    };

    function toggleAuthMode() {
        document.getElementById('login-form').classList.toggle('hidden');
        document.getElementById('register-form').classList.toggle('hidden');
    }

    function handleAuth(type, event) {
        event.preventDefault();
        const isLogin = type === 'login';
        const name = document.getElementById(isLogin ? 'login-username' : 'reg-username').value.trim();
        const pass = document.getElementById(isLogin ? 'login-password' : 'reg-password').value.trim();

        if(!name || !pass) return alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');

        if(!isLogin) {
            // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
            DB.users.push({ name, pass, role: 'student' });
            localStorage.setItem('users_v2', JSON.stringify(DB.users));
            alert('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –¢–µ–ø–µ—Ä—å –≤–æ–π–¥–∏—Ç–µ.');
            toggleAuthMode();
            return;
        }

        // –í—Ö–æ–¥
        let role = 'student';
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ê–¥–º–∏–Ω–∞
        if(name === '–ê—Ç–∞–Ω–∏—è–∑–æ–≤ –ú—É—Ä–∞—Ç' && pass === '—Ç–µ–Ω—å') {
            role = 'admin';
        } 
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –£—á–∏—Ç–µ–ª—è (–ø–∞—Ä–æ–ª—å —Ç–µ–Ω—å)
        else if(pass === '—Ç–µ–Ω—å') {
            role = 'teacher';
        } 
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –£—á–µ–Ω–∏–∫–∞
        else {
            const user = DB.users.find(u => u.name === name && u.pass === pass);
            if(!user) return alert('–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å');
            role = 'student';
        }

        CURRENT_USER = { name, role };
        enterApp();
    }

    // –ü—Ä–∏–≤—è–∑–∫–∞ —Ñ–æ—Ä–º
    document.getElementById('login-form').onsubmit = (e) => handleAuth('login', e);
    document.getElementById('register-form').onsubmit = (e) => handleAuth('register', e);

    function enterApp() {
        document.getElementById('auth-screen').classList.add('hidden');
        document.getElementById('app').classList.remove('hidden');
        
        document.getElementById('user-name-display').innerText = CURRENT_USER.name;
        const badge = document.getElementById('user-badge');
        badge.className = `role-badge role-${CURRENT_USER.role}`;
        badge.innerText = CURRENT_USER.role === 'admin' ? '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' : (CURRENT_USER.role === 'teacher' ? '–£—á–∏—Ç–µ–ª—å' : '–£—á–µ–Ω–∏–∫');

        if(CURRENT_USER.role !== 'student') {
            document.getElementById('admin-link').classList.remove('hidden');
        }

        renderSubjects();
        showPage('dashboard');
    }

    function logout() {
        location.reload();
    }

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è
    function showPage(pageId) {
        document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
        document.getElementById(`page-${pageId}`).classList.remove('hidden');
        
        if(pageId === 'admin') renderAdminTable();
    }

    // --- 3. –†–ï–ù–î–ï–† –ü–†–ï–î–ú–ï–¢–û–í ---
    function renderSubjects() {
        const container = document.getElementById('subjects-container');
        container.innerHTML = '';
        
        Object.keys(SUBJECTS_DATA).forEach(subj => {
            const data = SUBJECTS_DATA[subj];
            const card = document.createElement('div');
            card.className = 'subject-card';
            card.onclick = () => startTest(subj);
            card.innerHTML = `
                <div class="card-img" style="background-image: url('${data.img}')"></div>
                <div class="card-content">
                    <h3>${subj}</h3>
                    <p style="color:var(--secondary); font-size:0.9rem; margin-bottom:1rem;">${data.desc}</p>
                    <div class="card-meta">
                        <span>‚≠ê –°–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å</span>
                        <span>30 –≤–æ–ø—Ä–æ—Å–æ–≤</span>
                    </div>
                </div>
            `;
            container.appendChild(card);
        });
    }

    // --- 4. –õ–û–ì–ò–ö–ê –¢–ï–°–¢–ê ---
    function startTest(subject) {
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—É–ª–∞ –∏–∑ 30 –≤–æ–ø—Ä–æ—Å–æ–≤ (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞, —Ç.–∫. –±–∞–∑—ã –Ω–µ—Ç)
        const sourceQs = SUBJECTS_DATA[subject].questions;
        let fullQuiz = [];
        
        // –ù–∞–ø–æ–ª–Ω—è–µ–º –¥–æ 30 –≤–æ–ø—Ä–æ—Å–æ–≤ (—Ä–∞–Ω–¥–æ–º–Ω–æ –∏–∑ –±–∞–∑—ã + –Ω–µ–±–æ–ª—å—à–∏–µ –≤–∞—Ä–∏–∞—Ü–∏–∏)
        while(fullQuiz.length < 30) {
            const randomQ = sourceQs[Math.floor(Math.random() * sourceQs.length)];
            fullQuiz.push({ ...randomQ }); // –ö–æ–ø–∏—è –æ–±—ä–µ–∫—Ç–∞
        }
        
        QUIZ_STATE = { subject: subject, questions: fullQuiz, answers: [], index: 0 };
        document.getElementById('quiz-subject-title').innerText = subject;
        showPage('quiz');
        renderQuestion();
    }

    function cancelTest() {
        if(confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —Ç–µ—Å—Ç? –ü—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω.')) {
            showPage('dashboard');
        }
    }

    function renderQuestion() {
        const q = QUIZ_STATE.questions[QUIZ_STATE.index];
        document.getElementById('q-text').innerText = `${QUIZ_STATE.index + 1}. ${q.q}`;
        
        // –ü—Ä–æ–≥—Ä–µ—Å—Å
        const pct = ((QUIZ_STATE.index) / 30) * 100;
        document.getElementById('quiz-progress').style.width = `${pct}%`;

        const optsDiv = document.getElementById('q-options');
        optsDiv.innerHTML = '';

        q.options.forEach((opt, idx) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => selectOption(idx, btn);
            optsDiv.appendChild(btn);
        });
    }

    let selectedOptionIndex = null;

    function selectOption(idx, btnElem) {
        document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
        btnElem.classList.add('selected');
        selectedOptionIndex = idx;
    }

    document.getElementById('next-btn').onclick = () => {
        if(selectedOptionIndex === null) return alert('–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞!');
        
        QUIZ_STATE.answers.push(selectedOptionIndex);
        selectedOptionIndex = null;
        QUIZ_STATE.index++;

        if(QUIZ_STATE.index < 30) {
            renderQuestion();
        } else {
            finishTest();
        }
    };

    function finishTest() {
        let score = 0;
        let reviewHTML = '';

        QUIZ_STATE.questions.forEach((q, i) => {
            const userAnsIdx = QUIZ_STATE.answers[i];
            const isCorrect = userAnsIdx === q.correct;
            if(isCorrect) score++;

            reviewHTML += `
                <div class="review-item ${isCorrect ? 'correct' : 'wrong'}">
                    <div style="font-weight:600; margin-bottom:5px;">–í–æ–ø—Ä–æ—Å ${i+1}: ${q.q}</div>
                    <div>–í–∞—à –æ—Ç–≤–µ—Ç: <b>${q.options[userAnsIdx]}</b></div>
                    ${!isCorrect ? `<div style="color:var(--success)">–ü—Ä–∞–≤–∏–ª—å–Ω–æ: <b>${q.options[q.correct]}</b></div>` : ''}
                    <div class="explanation">üí° <strong>–†–∞–∑–±–æ—Ä:</strong> ${q.sol}</div>
                </div>
            `;
        });

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        DB.results.push({
            date: new Date().toLocaleDateString() + ' ' + new Date().toLocaleTimeString(),
            user: CURRENT_USER.name,
            subject: QUIZ_STATE.subject,
            score: score
        });
        localStorage.setItem('results_v2', JSON.stringify(DB.results));

        // –í—ã–≤–æ–¥
        document.getElementById('final-score').innerText = `${score} / 30`;
        document.getElementById('review-container').innerHTML = reviewHTML;
        showPage('result');
    }

    // --- 5. –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ ---
    function renderAdminTable() {
        const tbody = document.querySelector('#admin-table tbody');
        if(DB.results.length === 0) {
            tbody.innerHTML = '<tr><td colspan="5" style="text-align:center; padding:2rem;">–ü–æ–∫–∞ –Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</td></tr>';
            return;
        }
        
        tbody.innerHTML = DB.results.slice().reverse().map(r => `
            <tr>
                <td>${r.date}</td>
                <td style="font-weight:600">${r.user}</td>
                <td>${r.subject}</td>
                <td><span style="font-weight:bold; color:${r.score > 15 ? 'var(--success)' : 'var(--danger)'}">${r.score}</span> / 30</td>
                <td><span class="role-badge role-student">–ó–∞–≤–µ—Ä—à–µ–Ω</span></td>
            </tr>
        `).join('');
    }

</script>
</body>
</html>